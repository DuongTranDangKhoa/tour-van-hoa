<div class="checkout-page-layout__container">
  <!-- Header Navigation -->
  <section class="checkout-page-layout__navigation">
    <div class="step-navigation checkout-page-layout__step-navigation">
      <ul class="step-navigation__bar" role="tablist">
        <li id="step-item-details" class="step-navigation__bar__step--active step-navigation__bar__step--new-color step-navigation__bar__step" role="tab" aria-current="true" aria-label="Details">
          <span class="step-navigation__bar__step__circle--active step-navigation__bar__step__circle--new-color step-navigation__bar__step__circle">
            <span>1</span>
          </span>
          <span class="step-navigation__bar__step__name--active step-navigation__bar__step__name">Personal Information</span>
        </li>
        <li id="step-item-payment" class="step-navigation__bar__step--new-color step-navigation__bar__step" role="tab" aria-current="false" aria-label="Payment">
          <span class="step-navigation__bar__step__circle--new-color step-navigation__bar__step__circle">
            <span>2</span>
          </span>
          <span class="step-navigation__bar__step__name">Payment</span>
        </li>
      </ul>
    </div>
  </section>

  <div class="checkout-page-layout__content-wrapper">
    <!-- Main Content -->
    <section class="checkout-page-layout__main-content" data-test-id="checkout-section">
      <!-- Warning Box -->
      <div class="warning-box" style="background-color: #ffebee; padding: 16px; border-radius: 4px; margin: 20px 0;">
        <div style="display: flex; align-items: center;">
          <span class="c-icon" style="margin-right: 8px;"><span class="i-alert c-icon__c-alert" aria-hidden="true"></span></span>
          <span>⏱️We will hold your spot for 02:00 minutes.</span>
        </div>
      </div>

      <div>
        <section>
          <h2 class="checkout__title">Please enter your personal information</h2>
          <div class="checkout__secure-disclaimer">
            <span class="c-icon"><span class="i-lock c-icon__c-lock" aria-hidden="true"></span></span>
            <span class="checkout__secure-disclaimer--description">Fast and secure payment</span>
          </div>

          <section>
            <div class="billing-form">
              <div class="billing-form__container" data-test-id="checkout-billing-form">
                <div>
                  <!-- Full Name Field -->
                  <div class="c-form-field c-form-field--vertical">
                    <div class="c-form-field__container">
                      <div class="c-input c-input--with-label billing-form__field">
                        <div class="c-input__container">
                          <label class="c-input__label" for="fullname">Full Name*</label>
                          <input id="fullname" class="c-input__field" data-test-id="billing-fullname" type="text" name="fullname" [(ngModel)]="customerDetails.fullName" required>
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- Email Field -->
                  <div class="c-form-field c-form-field--vertical personal-details-form__email" data-test-id="billing-email-field">
                    <div class="c-form-field__container">
                      <div class="c-input c-input--with-label billing-form__field">
                        <div class="c-input__container">
                          <label class="c-input__label" for="email">Email*</label>
                          <input id="email" class="c-input__field" data-test-id="billing-email" type="email" name="email" [(ngModel)]="customerDetails.email" required>
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- Country and Phone Number Fields -->
                  <div class="c-form-field c-form-field--vertical">
                    <div class="c-form-field__container">
                      <div class="phone-number-input phone-number-input--always-visible-country-input">
                        <span class="select-label">Nationality*</span>
                        <div class="gyg-select">
                          <select class="gyg-select-field" [(ngModel)]="customerDetails.country" name="country" required>
                            <option value="VN">Vietnam (+84)</option>
                            <option value="US">United States (+1)</option>
                            <option value="UK">United Kingdom (+44)</option>
                          </select>
                          <span class="gyg-select-icon gyg-select-icon-posticon"><span class="c-icon"><span class="i-chevron-down c-icon__c-chevron-down" aria-hidden="true"></span></span></span>
                        </div>
                        <div class="c-input c-input--with-label">
                          <div class="c-input__container">
                            <label class="c-input__label" for="phone">Mobile Phone Number*</label>
                            <input id="phone" class="c-input__field" data-test-id="billing-phone-nr" type="tel" name="phone" [(ngModel)]="customerDetails.phone" required>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                  <!-- Special requirement -->
<div class="c-form-field c-form-field--vertical" data-test-id="billing-special-request-field">
  <div class="c-form-field__container">
    <div class="c-input c-input--with-label billing-form__field">
      <div class="c-input__container">
        <label class="c-input__label" for="special-request">
          <span style="display: inline-flex; align-items: center; gap: 8px;">
            Special Requests
            <svg (click)="toggleSpecialRequestInfo()" 
                 style="cursor: pointer; width: 16px; height: 16px;" 
                 xmlns="http://www.w3.org/2000/svg" 
                 height="16px" 
                 viewBox="0 -960 960 960" 
                 width="16px" 
                 fill="#434343">
              <path d="M440-280h80v-240h-80v240Zm40-320q17 0 28.5-11.5T520-640q0-17-11.5-28.5T480-680q-17 0-28.5 11.5T440-640q0 17 11.5 28.5T480-600Zm0 520q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"/>
            </svg>
          </span>
        </label>
        <textarea id="special-request" 
                  class="c-input__field" 
                  data-test-id="billing-special-request" 
                  name="special-request" 
                  [(ngModel)]="customerDetails.specialRequest"
                  style="resize: none; height: 80px;"
                  placeholder="e.g. No onions, need a wheelchair, etc.">
        </textarea>
      </div>
      
      <!-- Modal Info -->
      <!-- Modal Info -->
<div *ngIf="showSpecialRequestInfo" 
     style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); z-index: 1000; display: flex; justify-content: center; align-items: center;">
  <div style="background-color: white; padding: 25px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.15); max-width: 500px; width: 90%;">
    <h3 style="margin-top: 0; color: #333; text-align: center;">Special Requests</h3>
    
    <div style="text-align: left; margin-bottom: 20px;">
      <p style="margin: 15px 0;">
        <strong>1. Medical Support:</strong><br>
        Do you need us to be aware of any medical support needs? 
        (e.g., car sick, wheelchair access, specific health conditions...)
      </p>
      
      <p style="margin: 15px 0;">
        <strong>2. Special Occasion:</strong><br>
        Are you celebrating a special occasion? 
        (birthday, anniversary, etc.)
      </p>
      
      <p style="margin: 15px 0;">
        <strong>3. Other Requests:</strong><br>
        Do you have any other special requests to make your trip more comfortable?
      </p>
    </div>
    
    <div style="text-align: center;">
      <button (click)="toggleSpecialRequestInfo()" 
              style="padding: 12px 24px; background-color: #007bff; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 500;">
        Close
      </button>
    </div>
  </div>
</div>
    </div>
  </div>
</div>


                <!-- Dietary Preferences -->
                <span class="select-label">What is your diet?*</span>
                <div class="c-radio-group" style="margin: 20px 0; display: flex; gap: 20px;">
                  <div style="display: flex; align-items: center;">
                    <input id="diet-meat" type="radio" class="c-radio__input" name="dietary-preference" value="meat" [(ngModel)]="customerDetails.dietaryPreference" style="margin-right: 8px;">
                    <label for="diet-meat">Non-vegetarian</label>
                  </div>
                  <div style="display: flex; align-items: center;">
                    <input id="diet-vegetarian" type="radio" class="c-radio__input" name="dietary-preference" value="vegetarian" [(ngModel)]="customerDetails.dietaryPreference" style="margin-right: 8px;">
                    <label for="diet-vegetarian">Vegetarian</label>
                  </div>
                </div>

                <!-- Allergy Input -->
                <div style="margin: 30px 0;">
                  <span class="select-label">Enter your food allergies (if any): </span>
                  <div class="allergy-input-container" style="margin: 15px 0;">
                    <input type="text" class="c-input" placeholder="Enter the food you are allergic to..." [(ngModel)]="allergyInput" (input)="onAllergyInput()" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 4px;">
                    <div class="autocomplete-suggestions" *ngIf="showSuggestions && filteredSuggestions.length > 0" style="border: 1px solid #ddd; border-top: none; max-height: 200px; overflow-y: auto;">
                      <div *ngFor="let suggestion of filteredSuggestions" class="suggestion-item" (click)="selectAllergy(suggestion)" style="padding: 10px; cursor: pointer; border-bottom: 1px solid #eee;" onMouseOver="this.style.backgroundColor='#f5f5f5'" onMouseOut="this.style.backgroundColor='white'">
                        {{ suggestion }}
                      </div>
                    </div>
                  </div>
                  <div class="selected-allergies" style="margin-top: 15px;">
                    <div *ngFor="let allergy of customerDetails.allergies" class="allergy-tag" style="display: inline-block; background: #e3f2fd; padding: 6px 12px; margin: 4px; border-radius: 16px; font-size: 14px;">
                      {{ allergy }}
                      <span (click)="removeAllergy(allergy)" style="margin-left: 8px; cursor: pointer; color: #666;">×</span>
                    </div>
                  </div>
                </div>

                <!-- Submit Button -->
                <div class="billing-form__validate-billing-details-and-sri">
                  <button class="c-button c-button--medium c-button--filled c-button--filled-standard billing-form__validate-billing-details-and-sri__button" type="button" (click)="goToPayment()" data-test-id="checkout-submit-btn">
                    <span class="c-button__text">
                      <div class="loading-button__label">Go to payment</div>
                    </span>
                  </button>
                </div>
              </div>
            </div>
          </section>
        </section>
      </div>
    </section>

    <!-- Order Summary Sidebar -->
    <section class="checkout-page-layout__order-summary">
      <div class="order-summary" data-test-id="order-summary">
        <div class="order-summary__title">
          <h3>Order Summary</h3>
        </div>
        <div class="order-summary__container">
          <section>
            <div class="order-summary__cart-items">
              <div class="cart-item" data-test-id="cart-item">
                <section class="cart-item__activity-container">
                  <div class="cart-item__activity-container--main-info">
                    <div class="cart-item__activity-container--main-info--image">
                      <picture class="c-image c-image--loaded c-image--radius-1x">
                        <img class="c-image__img c-image__img--crop" src="https://cdn.getyourguide.com/image/format=auto,fit=crop,gravity=auto,quality=60,width=65,height=65/tour_img/5c9e27e2d47d4.jpeg" alt="Art and Culture 1" width="64" height="64">
                      </picture>
                    </div>
                    <div class="cart-item__activity-container-main-info--details">
                      <h4 class="cart-item__activity-container--main-info--title" data-test-id="cart-item-title">
                        Art and Culture
                      </h4>
                      <div class="cart-item__description--rating">
                        <div class="c-activity-rating c-activity-rating--compact darker-yellow-experiment">
                          <div class="c-user-rating c-user-rating--compact">
                            <div class="c-user-rating__stars-container">
                              <span class="c-user-rating__star"><span class="c-icon c-user-rating__icon c-user-rating--five c-user-rating__icon--full"><span class="i-star-fill c-icon__c-star-fill" aria-hidden="true"></span></span></span>
                              <span class="c-user-rating__star"><span class="c-icon c-user-rating__icon c-user-rating--five c-user-rating__icon--full"><span class="i-star-fill c-icon__c-star-fill" aria-hidden="true"></span></span></span>
                              <span class="c-user-rating__star"><span class="c-icon c-user-rating__icon c-user-rating--five c-user-rating__icon--full"><span class="i-star-fill c-icon__c-star-fill" aria-hidden="true"></span></span></span>
                              <span class="c-user-rating__star"><span class="c-icon c-user-rating__icon c-user-rating--five c-user-rating__icon--full"><span class="i-star-fill c-icon__c-star-fill" aria-hidden="true"></span></span></span>
                              <span class="c-user-rating__star"><span class="c-icon c-user-rating__icon c-user-rating--five c-user-rating__icon--empty c-user-rating__icon--half"><span class="i-star-fill c-icon__c-star-fill" aria-hidden="true"></span></span></span>
                            </div>
                            <div class="c-activity-rating__rating">4.7</div>
                            <div class="c-activity-rating__label">(519)</div>
                          </div>
                        </div>
                      </div>
                      <div class="cart-item__description--badges">
                        <span class="c-marketplace-badge c-marketplace-badge--primary cart-item__description--badges--n-spots-left">Only 2 spots left</span>
                        <span class="c-marketplace-badge c-marketplace-badge--secondary cart-item__description--badges--top-rated-no-icon">Top rated</span>
                      </div>
                    </div>
                  </div>
                  <div class="cart-item__description">
                    <div class="cart-item__description--details">
                      <div class="cart-item__description--details--entry">
                        <span class="c-icon"><span class="i-tickets c-icon__c-tickets" aria-hidden="true"></span></span>
                        <div>language: Vietnamese</div>
                      </div>
                      <div class="cart-item__description--details--entry">
                        <span class="c-icon"><span class="i-clock c-icon__c-clock" aria-hidden="true"></span></span>
                        <div>Saturday, September 6, 2025 at 6:00 AM</div>
                      </div>
                      <div class="cart-item__description--details--entry">
                        <span class="c-icon"><span class="i-users c-icon__c-users" aria-hidden="true"></span></span>
                        <div>1 adult (Age 30 - 69)</div>
                      </div>
                    </div>
                  </div>
                </section>
              </div>
            </div>
          </section>
          <div class="expanded order-summary__total">
            <div class="order-summary__total__label">
              <div>Total</div>
            </div>
            <div class="order-summary__total__price">
              <div class="price price--big" data-test-id="order-summary-total">
                <div>₫7,670,400</div>
              </div>
              <div class="order-summary__total__price__no-fees">
                <span class="taxes-included-message">All taxes and fees included</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>
</div>