<div class="booking-list-container" id="bookings">
  <div class="container">
    <!-- Header -->
    <div class="section-header">
      <h2>Danh s√°ch ƒë·∫∑t tour</h2>
      <p>Qu·∫£n l√Ω t·∫•t c·∫£ c√°c ƒë·∫∑t tour c·ªßa kh√°ch h√†ng</p>
    </div>

    <!-- Filters -->
    <div class="filters-section">
      <div class="search-box">
        <input 
          type="text" 
          placeholder="T√¨m ki·∫øm theo t√™n, email, phone..." 
          [(ngModel)]="searchQuery"
          (input)="onSearch()"
        >
        <i class="search-icon">üîç</i>
      </div>

      <div class="filter-options">
        <select [(ngModel)]="selectedPaymentMethod" (change)="onPaymentMethodChange()">
          <option value="">T·∫•t c·∫£ ph∆∞∆°ng th·ª©c thanh to√°n</option>
          <option value="bank_transfer">Chuy·ªÉn kho·∫£n</option>
          <option value="credit_card">Th·∫ª t√≠n d·ª•ng</option>
          <option value="cash">Ti·ªÅn m·∫∑t</option>
        </select>

        <button class="btn btn-primary" (click)="loadBookings()">
          üîÑ L√†m m·ªõi
        </button>

      </div>
    </div>

    <!-- Loading State -->
    <div class="loading-state" *ngIf="isLoading">
      <div class="spinner"></div>
      <p>ƒêang t·∫£i danh s√°ch ƒë·∫∑t tour...</p>
    </div>

    <!-- Error State -->
    <div class="error-state" *ngIf="error && !isLoading">
      <p class="error-message">{{ error }}</p>
      <button class="btn btn-primary" (click)="loadBookings()">Th·ª≠ l·∫°i</button>
    </div>

    <!-- Bookings Table -->
    <div class="bookings-table" *ngIf="!isLoading && !error">
      <div class="table-responsive">
        <table>
          <thead>
            <tr>
              <th>Kh√°ch h√†ng</th>
              <th>Th√¥ng tin li√™n h·ªá</th>
              <th>Chi ti·∫øt tour</th>
              <th>Thanh to√°n</th>
              <th>Ng√†y t·∫°o</th>
              <th>Thao t√°c</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let booking of filteredBookings" class="booking-row">
              <!-- Customer Info -->
              <td class="customer-info">
                <div class="customer-name">{{ booking.fullName }}</div>
                <div class="customer-details">
                  <span class="gender">{{ getGenderLabel(booking.gender) }}</span>
                  <span class="id-card">CMND: {{ booking.idCard }}</span>
                </div>
                <div class="customer-address">{{ booking.address }}</div>
              </td>

              <!-- Contact Info -->
              <td class="contact-info">
                <div class="email">{{ booking.email }}</div>
                <div class="phone">{{ booking.phone }}</div>
                <div class="emergency-contact" *ngIf="booking.emergency_contact_name">
                  <small>Li√™n h·ªá kh·∫©n c·∫•p: {{ booking.emergency_contact_name }} ({{ booking.emergency_contact_phone }})</small>
                </div>
              </td>

              <!-- Tour Details -->
              <td class="tour-details">
                <div class="people-count">{{ booking.numberOfPeople }} ng∆∞·ªùi</div>
                <div class="dates">
                  <div>ƒêi: {{ formatDate(booking.departureDate) }}</div>
                  <div>V·ªÅ: {{ formatDate(booking.returnDate) }}</div>
                </div>
                <div class="special-requests" *ngIf="booking.specialRequests">
                  <small>Y√™u c·∫ßu: {{ booking.specialRequests }}</small>
                </div>
              </td>

              <!-- Payment Info -->
              <td class="payment-info">
                <div class="payment-method">{{ getPaymentMethodLabel(booking.paymentInfo_paymentMethod) }}</div>
                <div class="amounts">
                  <div class="total">T·ªïng: {{ formatCurrency(booking.paymentInfo_totalAmount) }}</div>
                  <div class="deposit">ƒê·∫∑t c·ªçc: {{ formatCurrency(booking.paymentInfo_depositAmount) }}</div>
                  <div class="remaining">C√≤n l·∫°i: {{ formatCurrency(booking.paymentInfo_remainingAmount) }}</div>
                </div>
              </td>

              <!-- Created Date -->
              <td class="created-date">
                {{ formatDate(booking.created_at) }}
              </td>

              <!-- Actions -->
              <td class="actions">
                <button class="btn btn-sm btn-info" (click)="viewBookingDetails(booking)" title="Xem chi ti·∫øt">
                  üëÅÔ∏è
                </button>
                <button class="btn btn-sm btn-warning" (click)="editBooking(booking)" title="Ch·ªânh s·ª≠a">
                  ‚úèÔ∏è
                </button>
                <button class="btn btn-sm btn-danger" (click)="deleteBooking(booking)" title="X√≥a">
                  üóëÔ∏è
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- No Results -->
      <div class="no-results" *ngIf="filteredBookings.length === 0 && !isLoading">
        <p>Kh√¥ng t√¨m th·∫•y ƒë·∫∑t tour n√†o ph√π h·ª£p v·ªõi b·ªô l·ªçc.</p>
      </div>
    </div>

    <!-- Pagination -->
    <div class="pagination" *ngIf="totalItems > itemsPerPage && !isLoading">
      <div class="pagination-info">
        Hi·ªÉn th·ªã {{ (currentPage - 1) * itemsPerPage + 1 }} - {{ Math.min(currentPage * itemsPerPage, totalItems) }} 
        trong t·ªïng s·ªë {{ totalItems }} ƒë·∫∑t tour
      </div>
      
      <div class="pagination-controls">
        <button 
          class="btn btn-secondary" 
          [disabled]="currentPage === 1"
          (click)="onPageChange(currentPage - 1)"
        >
          ‚Üê Tr∆∞·ªõc
        </button>
        
        <div class="page-numbers">
          <button 
            *ngFor="let page of getPageNumbers()" 
            class="btn btn-page" 
            [class.active]="page === currentPage"
            (click)="onPageChange(page)"
          >
            {{ page }}
          </button>
        </div>
        
        <button 
          class="btn btn-secondary" 
          [disabled]="currentPage >= Math.ceil(totalItems / itemsPerPage)"
          (click)="onPageChange(currentPage + 1)"
        >
          Sau ‚Üí
        </button>
      </div>
    </div>
  </div>
</div>
