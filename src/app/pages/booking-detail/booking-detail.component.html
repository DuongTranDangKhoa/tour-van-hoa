<div class="booking-detail-page" *ngIf="tour">
  <!-- Header -->
  <div class="page-header">
    <div class="header-content">
      <div class="logo">
        <h1>Tour VƒÉn H√≥a</h1>
      </div>
      <div class="header-nav">
        <a href="#" class="nav-link">
          <i class="icon">üìç</i>
          <span>Vi·ªát Nam</span>
        </a>
        <a href="#" class="nav-link">
          <i class="icon">üìÇ</i>
          <span>Danh m·ª•c</span>
        </a>
      </div>
      <div class="search-bar">
        <i class="icon">üîç</i>
        <input type="text" placeholder="T√¨m ki·∫øm tour...">
      </div>
      <div class="header-actions">
        <button class="action-btn">
          <i class="icon">‚ù§Ô∏è</i>
        </button>
        <button class="action-btn">
          <i class="icon">üë§</i>
        </button>
      </div>
    </div>
  </div>

  <div class="main-content">
    <!-- Left Panel - Tour Details -->
    <div class="tour-details-panel">
      <!-- Media Section -->
      <div class="media-section">
        <div class="main-image">
          <img [src]="tour.imageUrl" [alt]="tour.name">
          <div class="play-button">
            <i class="icon">‚ñ∂Ô∏è</i>
          </div>
        </div>
        <div class="image-grid">
          <div class="grid-item">
            <img [src]="tour.imageUrl" [alt]="tour.name">
            <div class="overlay-text">Tour VƒÉn H√≥a presents</div>
          </div>
          <div class="grid-item">
            <img [src]="tour.imageUrl" [alt]="tour.name">
          </div>
          <div class="grid-item">
            <img [src]="tour.imageUrl" [alt]="tour.name">
          </div>
          <div class="grid-item">
            <img [src]="tour.imageUrl" [alt]="tour.name">
            <div class="gallery-btn">
              <i class="icon">üì∑</i>
              <span>Th∆∞ vi·ªán</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Event Title and Actions -->
      <div class="event-header">
        <h1 class="event-title">{{ tour.name }}</h1>
        <div class="event-actions">
          <button class="action-btn">
            <i class="icon">üì§</i>
          </button>
          <button class="action-btn">
            <i class="icon">‚ù§Ô∏è</i>
          </button>
        </div>
      </div>

      <!-- Rating -->
      <div class="rating-section">
        <span class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
        <span class="rating-number">{{ tour.rating }}</span>
        <span class="review-count">(29 ƒë√°nh gi√°)</span>
      </div>

      <!-- Event Description -->
      <div class="event-description">
        <i class="icon">‚≠ê</i>
        <p>{{ tour.description }}</p>
      </div>

      <!-- General Info -->
      <div class="general-info">
        <div class="info-item">
          <i class="icon">üìç</i>
          <span><strong>ƒê·ªãa ƒëi·ªÉm:</strong> {{ tour.destination }}</span>
        </div>
        <div class="info-item">
          <i class="icon">üìÖ</i>
          <span><strong>Ng√†y v√† gi·ªù:</strong> Ch·ªçn ng√†y/gi·ªù tr·ª±c ti·∫øp trong b·ªô ch·ªçn v√©</span>
        </div>
        <div class="info-item">
          <i class="icon">‚è±Ô∏è</i>
          <span><strong>Th·ªùi l∆∞·ª£ng:</strong> {{ tour.duration }}. C·ª≠a m·ªü 30 ph√∫t tr∆∞·ªõc khi b·∫Øt ƒë·∫ßu v√† ƒë√≥ng 5 ph√∫t tr∆∞·ªõc khi b·∫Øt ƒë·∫ßu.</span>
        </div>
        <div class="info-item">
          <i class="icon">üë•</i>
          <span><strong>Y√™u c·∫ßu ƒë·ªô tu·ªïi:</strong> T·ª´ 8 tu·ªïi tr·ªü l√™n. Tr·∫ª em d∆∞·ªõi 16 tu·ªïi ph·∫£i c√≥ ng∆∞·ªùi l·ªõn ƒëi k√®m.</span>
        </div>
        <div class="info-item">
          <i class="icon">‚ôø</i>
          <span><strong>Kh·∫£ nƒÉng ti·∫øp c·∫≠n:</strong> ƒê·ªãa ƒëi·ªÉm n√†y c√≥ th·ªÉ ti·∫øp c·∫≠n b·∫±ng xe lƒÉn. Vui l√≤ng xem FAQ.</span>
        </div>
        <div class="info-item">
          <i class="icon">‚ùì</i>
          <span><strong>FAQ:</strong> Xem <a href="#">FAQ cho s·ª± ki·ªán n√†y t·∫°i ƒë√¢y</a></span>
        </div>
        <div class="info-item">
          <i class="icon">ü™ë</i>
          <span><strong>Ch·ªó ng·ªìi:</strong> Ch·ªó ng·ªìi ƒë∆∞·ª£c s·∫Øp x·∫øp theo th·ª© t·ª± ƒë·∫øn tr∆∞·ªõc ƒë∆∞·ª£c ph·ª•c v·ª• tr∆∞·ªõc trong m·ªói khu v·ª±c.</span>
        </div>
        <div class="info-item">
          <i class="icon">üîî</i>
          <span><strong>ƒê·∫∑t nh√≥m/T∆∞ nh√¢n:</strong> N·∫øu b·∫°n mu·ªën ƒë·∫∑t tour ri√™ng ho·∫∑c mua v√© th∆∞·ªùng cho nh√≥m l·ªõn (+30 ng∆∞·ªùi), <a href="#">nh·∫•p v√†o ƒë√¢y</a></span>
        </div>
        <div class="info-item">
          <i class="icon">üéµ</i>
          <span><strong>Tour kh√°c:</strong> Xem t·∫•t c·∫£ <a href="#">c√°c tour vƒÉn h√≥a t·∫°i Vi·ªát Nam</a></span>
        </div>
        <div class="info-item">
          <i class="icon">üéÅ</i>
          <span><strong>Th·∫ª qu√† t·∫∑ng:</strong> ƒê·ªÉ t·∫∑ng b·∫°n b√® v√† gia ƒë√¨nh <a href="#">th·∫ª qu√† t·∫∑ng tour, nh·∫•p v√†o ƒë√¢y</a></span>
        </div>
      </div>

      <!-- Programme Section -->
      <div class="programme-section">
        <h3>Ch∆∞∆°ng tr√¨nh tour:</h3>
        <ul class="programme-list">
          <li *ngFor="let highlight of tour.highlights">{{ highlight }}</li>
        </ul>
      </div>
    </div>

    <!-- Right Panel - Booking Widget -->
    <div class="booking-widget">
      <form [formGroup]="bookingForm" (ngSubmit)="onBookTour()">
        <!-- Customer Information Section -->
        <div class="customer-info-section">
          <h4>Th√¥ng tin kh√°ch h√†ng</h4>
          
          <div class="form-row">
            <div class="form-group">
              <label for="customerName">H·ªç v√† t√™n *</label>
              <input 
                type="text" 
                id="customerName"
                formControlName="customerName"
                placeholder="Nh·∫≠p h·ªç v√† t√™n"
                [class.error]="isFieldInvalid('customerName')"
              >
              <div class="error-message" *ngIf="isFieldInvalid('customerName')">
                {{ getFieldError('customerName') }}
              </div>
            </div>

            <div class="form-group">
              <label for="customerEmail">Email *</label>
              <input 
                type="email" 
                id="customerEmail"
                formControlName="customerEmail"
                placeholder="Nh·∫≠p email"
                [class.error]="isFieldInvalid('customerEmail')"
              >
              <div class="error-message" *ngIf="isFieldInvalid('customerEmail')">
                {{ getFieldError('customerEmail') }}
              </div>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="customerPhone">S·ªë ƒëi·ªán tho·∫°i *</label>
              <input 
                type="tel" 
                id="customerPhone"
                formControlName="customerPhone"
                placeholder="Nh·∫≠p s·ªë ƒëi·ªán tho·∫°i"
                [class.error]="isFieldInvalid('customerPhone')"
              >
              <div class="error-message" *ngIf="isFieldInvalid('customerPhone')">
                {{ getFieldError('customerPhone') }}
              </div>
            </div>

            <div class="form-group">
              <label for="customerIdCard">CMND/CCCD</label>
              <input 
                type="text" 
                id="customerIdCard"
                formControlName="customerIdCard"
                placeholder="Nh·∫≠p s·ªë CMND/CCCD"
              >
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="customerDateOfBirth">Ng√†y sinh</label>
              <input 
                type="date" 
                id="customerDateOfBirth"
                formControlName="customerDateOfBirth"
              >
            </div>

            <div class="form-group">
              <label for="customerGender">Gi·ªõi t√≠nh</label>
              <select id="customerGender" formControlName="customerGender">
                <option value="">Ch·ªçn gi·ªõi t√≠nh</option>
                <option value="male">Nam</option>
                <option value="female">N·ªØ</option>
                <option value="other">Kh√°c</option>
              </select>
            </div>
          </div>

          <div class="form-group">
            <label for="customerAddress">ƒê·ªãa ch·ªâ</label>
            <textarea 
              id="customerAddress"
              formControlName="customerAddress"
              rows="2"
              placeholder="Nh·∫≠p ƒë·ªãa ch·ªâ"
            ></textarea>
          </div>
        </div>

        <!-- Tour Details Section -->
        <div class="tour-details-section">
          <h4>Chi ti·∫øt ƒë·∫∑t tour</h4>
          
          <div class="form-row">
            <div class="form-group">
              <label for="numberOfPeople">S·ªë ng∆∞·ªùi *</label>
              <div class="quantity-controls">
                <button type="button" (click)="decreaseQuantity()" class="quantity-btn">-</button>
                <span class="quantity-display">{{ bookingForm.get('numberOfPeople')?.value || 1 }} ng∆∞·ªùi</span>
                <button type="button" (click)="increaseQuantity()" class="quantity-btn">+</button>
              </div>
              <div class="error-message" *ngIf="isFieldInvalid('numberOfPeople')">
                {{ getFieldError('numberOfPeople') }}
              </div>
            </div>

            <div class="form-group">
              <label for="paymentMethod">Ph∆∞∆°ng th·ª©c thanh to√°n *</label>
              <select id="paymentMethod" formControlName="paymentMethod">
                <option value="bank_transfer">Chuy·ªÉn kho·∫£n ng√¢n h√†ng</option>
                <option value="credit_card">Th·∫ª t√≠n d·ª•ng</option>
                <option value="cash">Ti·ªÅn m·∫∑t</option>
              </select>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="departureDate">Ng√†y kh·ªüi h√†nh *</label>
              <input 
                type="date" 
                id="departureDate"
                formControlName="departureDate"
                [class.error]="isFieldInvalid('departureDate')"
              >
              <div class="error-message" *ngIf="isFieldInvalid('departureDate')">
                {{ getFieldError('departureDate') }}
              </div>
            </div>

            <div class="form-group">
              <label for="returnDate">Ng√†y tr·ªü v·ªÅ *</label>
              <input 
                type="date" 
                id="returnDate"
                formControlName="returnDate"
                [class.error]="isFieldInvalid('returnDate')"
              >
              <div class="error-message" *ngIf="isFieldInvalid('returnDate')">
                {{ getFieldError('returnDate') }}
              </div>
            </div>
          </div>

          <div class="form-group">
            <label for="specialRequests">Y√™u c·∫ßu ƒë·∫∑c bi·ªát</label>
            <textarea 
              id="specialRequests"
              formControlName="specialRequests"
              rows="3"
              placeholder="Nh·∫≠p y√™u c·∫ßu ƒë·∫∑c bi·ªát (n·∫øu c√≥)"
            ></textarea>
          </div>
        </div>

        <!-- Emergency Contact Section -->
        <div class="emergency-contact-section">
          <h4>Th√¥ng tin li√™n h·ªá kh·∫©n c·∫•p</h4>
          
          <div class="form-row">
            <div class="form-group">
              <label for="emergencyContactName">T√™n ng∆∞·ªùi li√™n h·ªá</label>
              <input 
                type="text" 
                id="emergencyContactName"
                formControlName="emergencyContactName"
                placeholder="T√™n ng∆∞·ªùi li√™n h·ªá kh·∫©n c·∫•p"
              >
            </div>

            <div class="form-group">
              <label for="emergencyContactPhone">S·ªë ƒëi·ªán tho·∫°i</label>
              <input 
                type="tel" 
                id="emergencyContactPhone"
                formControlName="emergencyContactPhone"
                placeholder="S·ªë ƒëi·ªán tho·∫°i li√™n h·ªá kh·∫©n c·∫•p"
              >
            </div>
          </div>

          <div class="form-group">
            <label for="emergencyContactRelationship">M·ªëi quan h·ªá</label>
            <input 
              type="text" 
              id="emergencyContactRelationship"
              formControlName="emergencyContactRelationship"
              placeholder="M·ªëi quan h·ªá v·ªõi ng∆∞·ªùi li√™n h·ªá"
            >
          </div>
        </div>

        <!-- Tour Summary -->
        <div class="tour-summary">
          <h4>Th√¥ng tin tour v√† thanh to√°n</h4>
          <div class="summary-item">
            <span>Tour:</span>
            <span>{{ tour.name }}</span>
          </div>
          <div class="summary-item">
            <span>ƒêi·ªÉm ƒë·∫øn:</span>
            <span>{{ tour.destination }}</span>
          </div>
          <div class="summary-item">
            <span>Th·ªùi gian:</span>
            <span>{{ tour.duration }}</span>
          </div>
          <div class="summary-item">
            <span>Gi√° g·ªëc:</span>
            <span>{{ tour.price | currency:'VND':'symbol':'1.0-0' }}/ng∆∞·ªùi</span>
          </div>
          <div class="summary-item">
            <span>S·ªë ng∆∞·ªùi:</span>
            <span>{{ bookingForm.get('numberOfPeople')?.value || 1 }}</span>
          </div>
          <div class="summary-item">
            <span>T·ªïng ti·ªÅn:</span>
            <span>{{ getTotalPrice() | currency:'VND':'symbol':'1.0-0' }}</span>
          </div>
          <div class="summary-item">
            <span>ƒê·∫∑t c·ªçc (20%):</span>
            <span>{{ getDepositAmount() | currency:'VND':'symbol':'1.0-0' }}</span>
          </div>
          <div class="summary-item total">
            <span>C√≤n l·∫°i:</span>
            <span>{{ getRemainingAmount() | currency:'VND':'symbol':'1.0-0' }}</span>
          </div>
        </div>

        <!-- Submit Button -->
        <button type="submit" class="book-button" [disabled]="bookingForm.invalid || isSubmitting">
          <span *ngIf="!isSubmitting">
            {{ getTotalPrice() | currency:'VND':'symbol':'1.0-0' }} ‚Äî Ti·∫øp t·ª•c
          </span>
          <span *ngIf="isSubmitting">
            <i class="loading-spinner">‚è≥</i> ƒêang x·ª≠ l√Ω...
          </span>
        </button>
      </form>
    </div>
  </div>
</div>
